<!-- Modal Thêm Phòng -->
<div class="modal fade" id="addRoom" tabindex="-1" aria-labelledby="AddRoomModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <!-- Header -->
            <div class="modal-header">
                <h5 class="modal-title" id="AddRoomModalLabel">Thêm phòng mới</h5>
                <!-- Nút đóng modal -->
                <button type="button" class="close" data-bs-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>

            <!-- Body -->
            <div class="modal-body">
                <form [formGroup]="roomForm" (ngSubmit)="onSubmit()">
                    <!-- Thông báo lỗi chung -->
                    <!-- Hiển thị lỗi chỉ khi có lỗi trong quá trình gửi form -->
                    <div *ngIf="errorMessage && isFormSubmitted" class="alert alert-danger">
                        {{ errorMessage }}
                    </div>

                    <!-- Chọn rạp -->
                    <div class="form-group">
                        <label for="cinemaId">Chọn rạp</label>
                        <select class="form-control" id="cinemaId" formControlName="cinemaId">
                            <option value="" disabled>-- Chọn rạp --</option>
                            <option *ngFor="let cinema of cinemas" [value]="cinema.cinemasId">{{ cinema.name }}</option>
                        </select>
                        <div *ngIf="roomForm.get('cinemaId')?.touched && roomForm.get('cinemaId')?.invalid"
                            class="text-danger">
                            <small *ngIf="roomForm.get('cinemaId')?.errors?.['required']">Vui lòng chọn rạp</small>
                        </div>
                    </div>

                    <!-- Tên phòng -->
                    <div class="form-group">
                        <label for="roomName">Tên phòng</label>
                        <input type="text" class="form-control" id="roomName" formControlName="roomName">
                        <div *ngIf="roomForm.get('roomName')?.touched && roomForm.get('roomName')?.invalid"
                            class="text-danger">
                            <small *ngIf="roomForm.get('roomName')?.errors?.['required']">Tên phòng là bắt buộc</small>
                        </div>
                    </div>

                    <!-- Số hàng -->
                    <div class="form-group">
                        <label for="totalRows">Số hàng</label>
                        <input type="number" class="form-control" id="totalRows" formControlName="totalRows">
                        <div *ngIf="roomForm.get('totalRows')?.touched && roomForm.get('totalRows')?.invalid"
                            class="text-danger">
                            <small *ngIf="roomForm.get('totalRows')?.errors?.['required']">Số hàng là bắt buộc</small>
                            <small *ngIf="roomForm.get('totalRows')?.errors?.['min']">Số hàng phải lớn hơn 0</small>
                        </div>
                    </div>

                    <!-- Số cột -->
                    <div class="form-group">
                        <label for="totalColumns">Số cột</label>
                        <input type="number" class="form-control" id="totalColumns" formControlName="totalColumns">
                        <div *ngIf="roomForm.get('totalColumns')?.touched && roomForm.get('totalColumns')?.invalid"
                            class="text-danger">
                            <small *ngIf="roomForm.get('totalColumns')?.errors?.['required']">Số cột là bắt buộc</small>
                            <small *ngIf="roomForm.get('totalColumns')?.errors?.['min']">Số cột phải lớn hơn 0</small>
                        </div>
                    </div>

                    <!-- Giá ghế -->
                    <div class="form-group">
                        <label for="seatPrice">Giá ghế</label>
                        <input type="number" class="form-control" id="seatPrice" formControlName="seatPrice">
                        <div *ngIf="roomForm.get('seatPrice')?.touched && roomForm.get('seatPrice')?.invalid"
                            class="text-danger">
                            <small *ngIf="roomForm.get('seatPrice')?.errors?.['required']">Giá ghế là bắt buộc</small>
                            <small *ngIf="roomForm.get('seatPrice')?.errors?.['min']">Giá ghế phải >= 0</small>
                        </div>
                    </div>

                    <div class="modal-footer">
                        <!-- Nút Đóng modal -->
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Đóng</button>
                        <button type="submit" class="btn btn-primary"  >
                            <span *ngIf="isLoading" class="spinner-border spinner-border-sm mr-1"></span>
                            
                            Thêm phòng
                        </button>


                    </div>
                </form>
            </div>
        </div>
    </div>
</div>
<!-- Thông báo thành công -->
<div *ngIf="showSuccessMessage" class="alert alert-success alert-dismissible fade show" role="alert">
    Thêm phòng thành công!
    <button type="button" class="close" data-dismiss="alert" aria-label="Close" (click)="showSuccessMessage = false">
        <span aria-hidden="true">&times;</span>
    </button>
</div>